/* 自定义全局背景样式 - 仅深色模式 */

/* 深色模式透明度变量（可通过 Hugo 参数覆盖） */
:root {
    --bg-opacity: 0.2;            /* 页面整体背景透明度 */
    --sidebar-opacity: 0.0;       /* 侧边栏透明度 (0.0 = 全透明) */
    --widget-opacity: 0.0;        /* 小工具透明度 (0.0 = 全透明) */
    --toc-opacity: 0.85;          /* 目录小工具透明度 */
    --article-opacity: 0.2;       /* 文章卡片透明度 */
    --overlay-opacity: 0.5;       /* 背景遮罩透明度 */
}

/* 主背景图片设置 - 固定背景 */
/* 背景图片路径在 hugo.yaml 的 params.backgroundImage 中配置 */
/* 在 layouts/partials/head/custom.html 中动态生成,支持本地路径和外部 URL */
html {
    background-size: cover;
    background-attachment: fixed;  /* 保持固定背景 */
    background-position: center center;
    background-repeat: no-repeat;
    background-color: #303030;
    position: relative;
}

/* 背景遮罩层 */
html::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, var(--overlay-opacity));
    pointer-events: none;
    z-index: -1;
}

/* body 设为透明 */
body {
    background: transparent !important;
}

/* 页面整体背景半透明 */
:root {
    --body-background: rgba(48, 48, 48, var(--bg-opacity)) !important;
}

/* 主容器透明 */
.container {
    background: transparent !important;
}

/* ========== 侧边栏 - 全透明 ========== */
.left-sidebar,
aside.sidebar.left-sidebar {
    background-color: rgba(48, 48, 48, var(--sidebar-opacity)) !important;
    backdrop-filter: none !important;
}

/* 自定义侧边栏内容文字颜色 - 白色 */
.custom-sidebar-content,
.custom-sidebar-content h3,
.custom-sidebar-content h4,
.custom-sidebar-content p,
.custom-sidebar-content li,
.custom-sidebar-content a {
    color: rgba(255, 255, 255, 0.9) !important;
}

.custom-sidebar-content a:hover {
    color: rgba(255, 255, 255, 1) !important;
}

/* ========== 小工具 - 全透明 ========== */
.widget:not(.search-form),
.widget.tagCloud,
.widget.archives,
.widget.categories,
section.widget {
    background-color: rgba(48, 48, 48, var(--widget-opacity)) !important;
    box-shadow: none !important;
}

/* tagCloud 标签 */
.tagCloud-tags {
    background-color: rgba(48, 48, 48, var(--article-opacity)) !important;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    padding: 10px;
    border-radius: var(--card-border-radius);
}

.tagCloud-tags a {
    background-color: rgba(0, 0, 0, 0.2) !important;
    transition: background-color 0.3s ease;
}

.tagCloud-tags a:hover {
    background-color: rgba(0, 0, 0, 0.4) !important;
}

/* ========== 文章相关 - 半透明 ========== */
.article-list article,
.article-list--compact,
.article-list--tile article,
.article-page .main-article,
.main-article,
.not-found-card {
    background: rgba(48, 48, 48, var(--article-opacity)) !important;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
}

/* article-header 和 article-content 透明 */
.article-page .main-article .article-header,
.main-article .article-header,
.article-header,
.article-content {
    background: transparent !important;
}

/* ========== 目录小工具 ========== */
.widget--toc {
    background-color: rgba(48, 48, 48, var(--article-opacity)) !important;
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
}

/* ========== 文章详情信息 ========== */
.article-details {
    background-color: rgba(48, 48, 48, var(--article-opacity)) !important;
}

/* ========== 代码高亮背景 ========== */
.article-content .highlight {
    background-color: rgba(20, 20, 20, 0.5) !important;
}

/* 子元素透明避免叠加 */
.article-content .highlight .chroma,
.article-content .highlight .lntable,
.article-content .highlight .lntable tbody,
.article-content .highlight .lntable tr,
.article-content .highlight .lntd,
.article-content .highlight pre.chroma,
.article-content .highlight code {
    background-color: transparent !important;
}

/* ========== 手机模式下的侧边栏样式 ========== */
@media (max-width: 1024px) {
    /* 主菜单 - 和文章一样的半透明背景 */
    #main-menu {
        background-color: rgba(48, 48, 48, var(--article-opacity)) !important;
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
    }
    
    /* 菜单文字颜色 - 白色 */
    #main-menu,
    #main-menu a,
    #main-menu h3,
    #main-menu h4,
    #main-menu p,
    #main-menu li {
        color: rgba(255, 255, 255, 0.9) !important;
    }
    
    /* 菜单链接悬停效果 */
    #main-menu a:hover {
        color: rgba(255, 255, 255, 1) !important;
    }
    
    /* 侧边栏头部 - 全透明 */
    .left-sidebar header {
        background-color: transparent !important;
        backdrop-filter: none !important;
    }
    
    /* 自定义侧边栏内容 - 全透明 */
    #main-menu .custom-sidebar-content {
        background-color: transparent !important;
        backdrop-filter: none !important;
    }
    
    /* 自定义通知框 - 全透明 */
    #main-menu .custom-notice {
        background: transparent !important;
    }
}

/* ========== 搜索框和归档列表透明背景 ========== */
/* 搜索表单 */
.search-form.widget {
    background-color: transparent !important;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
}

/* 搜索表单内部所有元素 */
.search-form.widget p {
    background: transparent !important;
}

.search-form.widget label {
    background: transparent !important;
}

/* 输入框 - 半透明白色背景 */
.search-form.widget input {
    background-color: rgba(255, 255, 255, 0.1) !important;
}

/* 按钮保持透明 */
.search-form.widget button {
    background: transparent !important;
}

/* 归档列表 */
.widget-archive--list {
    background-color: transparent !important;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
}

/* ========== 主搜索页面表单 - 半透明 ========== */
.search-form:not(.widget) input {
    background-color: rgba(48, 48, 48, var(--article-opacity)) !important;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
}

/* ========== 自定义侧边栏内容 ========== */
.custom-sidebar-content {
    padding: 0;
    margin-top: 20px;
    text-align: left;
}

.custom-sidebar-content h3 {
    font-size: 1.4rem;
    margin-bottom: 10px;
}

.custom-sidebar-content p {
    font-size: 1.4rem;
    line-height: 2;
    white-space: pre-line;
}

.custom-links {
    margin-top: 15px;
}

.custom-links h4 {
    font-size: 1.4rem;
    margin-bottom: 8px;
}

.custom-links ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

.custom-links li {
    margin: 10px 0;
    font-size: 1.4rem;
    line-height: 2;
}

.custom-links a {
    text-decoration: none;
    font-size: 1.4rem;
}

.custom-card {
    background: transparent;
    padding: 10px;
    border-radius: 5px;
    margin-top: 15px;
    border-left: 3px solid var(--accent-color);
}

.custom-card h4 {
    font-size: 1.4rem;
    margin-bottom: 8px;
    margin-top: 0;
}

.custom-card p {
    margin: 0;
    font-size: 1.4rem;
    line-height: 2;
    white-space: pre-line;
}
